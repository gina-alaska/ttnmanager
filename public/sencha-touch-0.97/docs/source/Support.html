<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
  <title>The source code</title>
    <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
</head>
<body  onload="prettyPrint();">
    <pre class="prettyprint lang-js"><div id="cls-Ext.is"></div>/**
 * @class Ext.is
 * @singleton
 *
 * Determines information about the current platform the application is running on.
 */
Ext.is = {
    init : function() {
        var platforms = this.platforms,
            ln = platforms.length,
            i, platform;

        for (i = 0; i < ln; i++) {
            platform = platforms[i];
            this[platform.identity] = platform.regex.test(platform.string);
        }

        <div id="prop-Ext.is-Desktop"></div>/**
         * @property Desktop
         * @type {Boolean}
         */
        this.Desktop = this.Mac || this.Windows || (this.Linux && !this.Android);
        <div id="prop-Ext.is-Tablet"></div>/**
         * @property Tablet
         */
        this.Tablet = this.iPad;
        <div id="prop-Ext.is-Phone"></div>/**
         * @property Phone
         * @type {Boolean}
         */
        this.Phone = !this.Desktop && !this.Tablet;
        <div id="prop-Ext.is-iOS"></div>/**
         * @property iOS
         * @type {Boolean}
         */
        this.iOS = this.iPhone || this.iPad || this.iPod;
    },
    <div id="prop-Ext.is-iPhone"></div>/**
     * @property iPhone
     */
    platforms: [{
        string: navigator.platform,
        regex: /iPhone/i,
        identity: 'iPhone'
    },
    <div id="prop-Ext.is-iPod"></div>/**
     * @property iPod
     * @type {Boolean}
     */
    {
        string: navigator.platform,
        regex: /iPod/i,
        identity: 'iPod'
    },
    <div id="prop-Ext.is-iPad"></div>/**
     * @property iPad
     * @type {Boolean}
     */
    {
        string: navigator.userAgent,
        regex: /iPad/i,
        identity: 'iPad'
    },
    <div id="prop-Ext.is-Blackberry"></div>/**
     * @property Blackberry
     * @type {Boolean}
     */
    {
        string: navigator.userAgent,
        regex: /Blackberry/i,
        identity: 'Blackberry'
    },
    <div id="prop-Ext.is-Android"></div>/**
     * @property Android
     * @type {Boolean}
     */
    {
        string: navigator.userAgent,
        regex: /Android/i,
        identity: 'Android'
    },
    <div id="prop-Ext.is-Mac"></div>/**
     * @property Mac
     * @type {Boolean}
     */
    {
        string: navigator.platform,
        regex: /Mac/i,
        identity: 'Mac'
    },
    <div id="prop-Ext.is-Windows"></div>/**
     * @property Windows
     * @type {Boolean}
     */
    {
        string: navigator.platform,
        regex: /Win/i,
        identity: 'Windows'
    },
    <div id="prop-Ext.is-Linux"></div>/**
     * @property Linux
     * @type {Boolean}
     */
    {
        string: navigator.platform,
        regex: /Linux/i,
        identity: 'Linux'
    }]
};

Ext.is.init();

<div id="cls-Ext.supports"></div>/**
 * @class Ext.supports
 * @singleton
 *
 * Determines information about features are supported in the current environment
 */
Ext.supports = {
    init : function() {
        var doc = document,
            div = doc.createElement('div'),
            tests = this.tests,
            ln = tests.length,
            i, test;

        div.innerHTML = [
            '<div style="height:30px;width:50px;">',
                '<div style="height:20px;width:20px;"></div>',
            '</div>',
            '<div style="float:left; background-color:transparent;"></div>'
        ].join('');

        doc.body.appendChild(div);

        for (i = 0; i < ln; i++) {
            test = tests[i];
            this[test.identity] = test.fn.call(this, doc, div);
        }

        doc.body.removeChild(div);
    },

    <div id="prop-Ext.supports-OrientationChange"></div>/**
     * @property OrientationChange
     * @type {Boolean}
     */
    OrientationChange : !Ext.is.Desktop && (window.orientation !== undefined),

    tests: [
    <div id="prop-Ext.supports-CSS3"></div>/**
     * @property CSS3 Transitions
     * @type {Boolean}
     */
    {
        identity: 'Transitions',
        fn: function(doc, div) {
            var prefix = [
                    'webkit',
                    'Moz',
                    'o',
                    'ms',
                    'khtml'
                ],
                TE = 'TransitionEnd',
                transitionEndName = [
                    prefix[0] + TE,
                    'transitionend', //Moz bucks the prefixing convention
                    prefix[2] + TE,
                    prefix[3] + TE,
                    prefix[4] + TE
                ],
                ln = prefix.length,
                i = 0,
                out = false;
            div = Ext.get(div);
            for (; i < ln; i++) {
                if (div.getStyle(prefix[i] + "TransitionProperty")) {
                    Ext.supports.CSS3Prefix = prefix[i];
                    Ext.supports.CSS3TransitionEnd = transitionEndName[i];
                    out = true;
                    break;
                }
            }
            return out;
        }
    },
    <div id="prop-Ext.supports-Touch"></div>/**
     * @property Touch
     * @type {Boolean}
     */
    {
        identity: 'Touch',
        fn: function(doc, div) {
            return (!Ext.is.Desktop && ('ontouchstart' in div));
        }
    },
    <div id="prop-Ext.supports-RightMargin"></div>/**
     * @property RightMargin
     * @type {Boolean}
     */
    {
        identity: 'RightMargin',
        fn: function(doc, div, view) {
            view = doc.defaultView;
            return !(view && view.getComputedStyle(div.firstChild.firstChild, null).marginRight != '0px');
        }
    },
    <div id="prop-Ext.supports-TransparentColor"></div>/**
     * @property TransparentColor
     * @type {Boolean}
     */
    {
        identity: 'TransparentColor',
        fn: function(doc, div, view) {
            view = doc.defaultView;
            return !(view && view.getComputedStyle(div.lastChild, null).backgroundColor != 'transparent');
        }
    },
    <div id="prop-Ext.supports-SVG"></div>/**
     * @property SVG Support
     * @type {Boolean}
     */
    {
        identity: 'SVG',
        fn: function(doc) {
            return !!doc.createElementNS && !!doc.createElementNS( "http:/" + "/www.w3.org/2000/svg", "svg").createSVGRect;
        }
    },
    
    <div id="prop-Ext.supports-Canvas"></div>/**
     * @property Canvas Support
     * @type {Boolean}
     */
    {
        identity: 'Canvas',
        fn: function(doc) {
            return !!doc.createElement('canvas').getContext;
        }
    },
    <div id="prop-Ext.supports-VML"></div>/**
     * @property VML Support
     * @type {Boolean}
     */
    {
        identity: 'VML',
        fn: function(doc) {
            var d = doc.createElement("div");
            d.innerHTML = "<!--[if vml]><br><br><![endif]-->";
            return (d.childNodes.length == 2);
        }
    },
    <div id="prop-Ext.supports-Float"></div>/**
     * @property Float
     * @type {Boolean}
     */
    {
        identity: 'Float',
        fn: function(doc, div) {
            return !!div.lastChild.style.cssFloat;
        }
    },
    <div id="prop-Ext.supports-AudioTag"></div>/**
     * @property AudioTag
     * @type {Boolean}
     */
    {
        identity: 'AudioTag',
        fn: function(doc) {
            return !!doc.createElement('audio').canPlayType;
        }
    }]
};</pre>    
</body>
</html>